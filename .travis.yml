language: node_js
node_js:
  - "iojs"
  - '7'
before_script:
  - 'export CHROME_BIN=chromium-browser'
  - 'export DISPLAY=:99.0'
  - 'sh -e /etc/init.d/xvfb start'
#  - nvm install 7
#  - cd templates; npm install
script:
#  - npm run build
  - ./run-builds.sh
deploy:
  - provider: script
    script: "./cg-deploy/deploy.sh fs-intake-prod"
    skip_cleanup: true
    on:
      repo: 18F/fs-intake-module
      branch: master
  - provider: script
    script: "./cg-deploy/deploy.sh fs-intake-staging"
    skip_cleanup: true
    on:
      repo: flexion/fs-intake-module
#      condition: ${TRAVIS_BRANCH:0:7} = "sprint-"
      branch: "sprint-3-development"
