<section class="usa-section">
  <div class="usa-grid">
    <p class="usa-font-lead">{{forest}}</p>
    <p>All form fields are required unless otherwise noted.</p>
    <form class="usa-form-large" #form="ngForm" (ngSubmit)="onSubmit(form)">
      <fieldset>
        <legend>Applicant information</legend>

        <div *ngIf="form._submitted && !form.valid" class="usa-alert usa-alert-error" role="alert">
          <div class="usa-alert-body">
            <h3 class="usa-alert-heading">There are errors in your application.</h3>
            <p class="usa-alert-text">Please correct the errors before submitting.</p>
          </div>
        </div>

        <div *ngIf="apiErrors" class="usa-alert usa-alert-error" role="alert">
          <div class="usa-alert-body">
            <h3 class="usa-alert-heading">There are errors in your application.</h3>
            <ul class="usa-alert-text">
              <li *ngFor="let error of apiErrors">{{error}}</li>
            </ul>
          </div>
        </div>

        <label class="usa-input" for="guide-documentation">Guide documentation</label>
        <span>Please upload your guide documentation. File must be in .pdf format, and less than 1MB</span>
        <div class="usa-file-input">
          <input class="usa-input" id="guide-documentation" name="guide-documentation" type="file" ng2FileSelect [uploader]="guideDocument" />
          <span class="usa-button choose-file">Choose file</span>
          <span id="guide-documentation-error" class="usa-input-error-message" role="alert" [hidden]="!errorMessage">{{errorMessage}}</span>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th width="50%">Name</th>
              <th>Size</th>
              <th>Progress</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of guideDocument.queue">
              <td><strong>{{ item?.file?.name }}</strong></td>
              <td>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
              <td>{{ item.progress }}%</td>
              <td class="text-center">
                  <span *ngIf="item.isSuccess">success</span>
                  <span *ngIf="item.isCancel">cancelled</span>
                  <span *ngIf="item.isError">error</span>
              </td>
              <td nowrap>
                <button type="button" class="usa-button" (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
                  <span class="glyphicon glyphicon-upload"></span> Upload
                </button>
                <button type="button" class="usa-button-gray" (click)="item.cancel()" [disabled]="!item.isUploading">
                  <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                </button>
                <button type="button" class="usa-button-secondary" (click)="item.remove()">
                  <span class="glyphicon glyphicon-trash"></span> Remove
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <label class="usa-input" for="guide-documentation">Acknowledgement of risk form</label>
        <input class="usa-input" id="guide-documentation" name="guide-documentation" type="file" ng2FileSelect [uploader]="acknowledgementOfRiskForm" />


        <table class="table">
          <thead>
            <tr>
              <th width="50%">Name</th>
              <th>Size</th>
              <th>Progress</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of acknowledgementOfRiskForm.queue">
              <td><strong>{{ item?.file?.name }}</strong></td>
              <td>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
              <td>{{ item.progress }}%</td>
              <td class="text-center">
                  <span *ngIf="item.isSuccess">success</span>
                  <span *ngIf="item.isCancel">cancelled</span>
                  <span *ngIf="item.isError">error</span>
              </td>
              <td nowrap>
                <button type="button" class="usa-button" (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
                  <span class="glyphicon glyphicon-upload"></span> Upload
                </button>
                <button type="button" class="usa-button-gray" (click)="item.cancel()" [disabled]="!item.isUploading">
                  <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                </button>
                <button type="button" class="usa-button-secondary" (click)="item.remove()">
                  <span class="glyphicon glyphicon-trash"></span> Remove
                </button>
              </td>
            </tr>
          </tbody>
        </table>

      </fieldset>

      <button class="usa-button usa-button-big" type="submit">Submit Your Application</button>
    </form>
  </div>
</section>
