<section class="usa-section">
  <div class="usa-grid">
    <h1>Apply for a Noncommercial Group Use Permit</h1>
    <p>All form fields are required unless otherwise noted.</p>
    <form class="usa-form-large" #form="ngForm" (ngSubmit)="onSubmit()">
      <fieldset>
        <legend>Applicant Information</legend>

        <label class="usa-input" for="name">Name of group or event</label>
        <input id="name" name="name" type="text" required [(ngModel)]="application.name" #name="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="name.valid || name.untouched">Name of group or event is required</span>

        <fieldset>
          <legend>Are you applying as an individual or organization?</legend>
          <ul class="usa-unstyled-list">
            <li>
              <input id="individual" type="radio" name="applicant-type" value="individual" [(ngModel)]="applicantType">
              <label for="individual">Individual</label>
            </li>
            <li>
              <input id="organization" type="radio" name="applicant-type" value="organization" [(ngModel)]="applicantType">
              <label for="organization">Organization</label>
            </li>
          </ul>
        </fieldset>

        <div *ngIf="applicantType === 'individual'">
          <label class="usa-input" for="first-permit-holder-name">Primary permit holder name</label>
          <input id="first-permit-holder-name" name="first-permit-holder-name" type="text" required [(ngModel)]="application.primaryPermitHolderName" #primaryPermitHolderName="ngModel" />
          <span class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderName.valid || primaryPermitHolderName.untouched">Primary permit holder name is required</span>
        </div>

        <div *ngIf="applicantType === 'organization'">
          <label class="usa-input" for="organization-name">Organization name</label>
          <input id="organization-name" name="organization-name" type="text" required [(ngModel)]="application.organizationName" #organizationName="ngModel" />
          <span class="usa-input-error-message" role="alert" [hidden]="organizationName.valid || organizationName.untouched">Organization name is required</span>
        </div>

        <label class="usa-input" for="address">Address of group or contact</label>
        <input id="address" name="address" type="text" required [(ngModel)]="application.address" #address="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="address.valid || address.untouched">Address of group or contact is required</span>

        <label class="usa-input" for="address-line-2">Address Line 2 (optional)</label>
        <input id="address-line-2" name="address-line-2" type="text" [(ngModel)]="application.addressLine2" />

        <label class="usa-input" for="city">City</label>
        <input id="city" name="city" type="text" required [(ngModel)]="application.city" #city="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="city.valid || city.untouched">City is required</span>

        <label class="usa-input" for="state">State</label>
        <select id="state" name="state" required [(ngModel)]="application.state" #state="ngModel">
          <option value="" selected="selected"></option>
          <option *ngFor="let state of states" [value]="state">{{state}}</option>
        </select>
        <span class="usa-input-error-message" role="alert" [hidden]="state.valid || state.untouched">State is required</span>

        <label class="usa-input" for="zip">ZIP</label>
        <input id="zip" name="zip" type="text" minlength="5" maxlength="5" pattern="(^\d{5}$)" required [(ngModel)]="application.zip" #zip="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="zip.valid || zip.untouched">ZIP is required</span>

        <label class="usa-input" for="email">Email address</label>
        <input id="email" name="email" type="email" pattern="(^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$)" required [(ngModel)]="application.email" #email="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="email.valid || email.untouched">Email address is required</span>

        <fieldset>
          <legend>Phone</legend>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="day-phone-1" name="day-phone-1" type="text" minlength="3" maxlength="3" pattern="(^\d{3}$)" placeholder="555" required [(ngModel)]="application.dayPhone1" #dayPhone1="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="day-phone-2" name="day-phone-2" type="text" minlength="3" maxlength="3" pattern="(^\d{3}$)" placeholder="555" required [(ngModel)]="application.dayPhone2" #dayPhone2="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="day-phone-3" name="day-phone-3" type="text" minlength="4" maxlength="4" pattern="(^\d{4}$)" placeholder="5555" required [(ngModel)]="application.dayPhone3" #dayPhone3="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="day-phone-4" name="day-phone-4" type="text" placeholder="EXT" [(ngModel)]="application.dayPhoneExt" />
          </div>
        </fieldset>
        <span class="usa-input-error-message" role="alert" [hidden]="(dayPhone1.valid || dayPhone1.untouched) && (dayPhone2.valid || dayPhone2.untouched) && (dayPhone3.valid || dayPhone3.untouched)">Phone is required</span>

        <input id="add-additional-phone" name="add-additional-phone" type="checkbox" [(ngModel)]="additionalPhone" value="true" />
        <label class="usa-input" for="add-additional-phone">Add additional phone</label>

        <fieldset *ngIf="additionalPhone">
          <legend>Secondary Phone</legend>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="night-phone-1" name="night-phone-1" type="text" minlength="3" maxlength="3" pattern="(^\d{3}$)" placeholder="555" required [(ngModel)]="application.nightPhone1" #nightPhone1="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="night-phone-2" name="night-phone-2" type="text" minlength="3" maxlength="3" pattern="(^\d{3}$)" placeholder="555" required [(ngModel)]="application.nightPhone2" #nightPhone2="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="night-phone-3" name="night-phone-3" type="text" minlength="4" maxlength="4" pattern="(^\d{4}$)" placeholder="5555" required [(ngModel)]="application.nightPhone3" #nightPhone3="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="night-phone-4" name="night-phone-4" type="text" placeholder="EXT" [(ngModel)]="application.nightPhoneExt" />
          </div>
        </fieldset>

        <div *ngIf="applicantType === 'organization'">
          <label class="usa-input" for="website">Website (optional)</label>
          <input id="website" name="website" type="url" [(ngModel)]="application.website" />
        </div>

      </fieldset>

      <fieldset *ngIf="applicantType === 'organization'">
        <legend>Primary Permit Holder</legend>

        <label class="usa-input" for="primary-permit-holder-name">Primary permit holder name</label>
        <input id="primary-permit-holder-name" name="primary-permit-holder-name" type="text" required [(ngModel)]="application.primaryPermitHolderName" #primaryPermitHolderName="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderName.valid || primaryPermitHolderName.untouched">Primary permit holder name is required</span>

        <input id="primary-permit-holder-same-address" name="primary-permit-holder-same-address" type="checkbox" [(ngModel)]="primaryPermitHolderSameAddress" />
        <label class="usa-input" for="primary-permit-holder-same-address">Permit holder address same as organization address</label>

        <div *ngIf="!primaryPermitHolderSameAddress">
          <label class="usa-input" for="primary-permit-holder-address">Address</label>
          <input id="primary-permit-holder-address" name="primary-permit-holder-address" type="text" required [(ngModel)]="application.primaryPermitHolderAddress" #primaryPermitHolderAddress="ngModel" />
          <span class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderAddress.valid || primaryPermitHolderAddress.untouched">Address is required</span>

          <label class="usa-input" for="primary-permit-holder-address-line-2">Address Line 2 (optional)</label>
          <input id="primary-permit-holder-address-line-2" name="primary-permit-holder-address-line-2" type="text" [(ngModel)]="application.primaryPermitHolderAddressLine2" />

          <label class="usa-input" for="primary-permit-holder-city">City</label>
          <input id="primary-permit-holder-city" name="primary-permit-holder-city" type="text" required [(ngModel)]="application.primaryPermitHolderCity" #primaryPermitHolderCity="ngModel" />
          <span class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderCity.valid || primaryPermitHolderCity.untouched">City is required</span>

          <label class="usa-input" for="primary-permit-holder-state">State</label>
          <select id="primary-permit-holder-state" name="primary-permit-holder-state" required [(ngModel)]="application.primaryPermitHolderState" #primaryPermitHolderState="ngModel">
            <option value="" selected="selected"></option>
            <option *ngFor="let state of states" [value]="state">{{state}}</option>
          </select>
          <span class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderState.valid || primaryPermitHolderState.untouched">State is required</span>

          <label class="usa-input" for="primary-permit-holder-zip">ZIP</label>
          <input id="primary-permit-holder-zip" name="primary-permit-holder-zip" type="text" minlength="5" maxlength="5" pattern="(^\d{5}$)" required [(ngModel)]="application.zip" #primaryPermitHolderZip="ngModel" />
          <span class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderZip.valid || primaryPermitHolderZip.untouched">ZIP is required</span>
        </div>

      </fieldset>

      <button class="usa-button-gray" id="add-permit-holder" type="button" *ngIf="!viewSecondaryPermitHolder" (click)="viewSecondaryPermitHolder = !viewSecondaryPermitHolder">Add a secondary permit holder</button>

      <fieldset *ngIf="viewSecondaryPermitHolder">
        <button class="hide-secondary-permit-holder usa-button-outline" id="hide-secondary-permit-holder" type="button" (click)="viewSecondaryPermitHolder = !viewSecondaryPermitHolder">Remove</button>
        <legend>Secondary Permit Holder</legend>

        <label class="usa-input" for="secondary-permit-holder-name">Secondary permit holder name</label>
        <input id="secondary-permit-holder-name" name="secondary-permit-holder-name" type="text" required [(ngModel)]="application.secondaryPermitHolderName" #secondaryPermitHolderName="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderName.valid || secondaryPermitHolderName.untouched">Secondary permit holder name is required</span>

        <input id="secondary-permit-holder-same-address" name="secondary-permit-holder-same-address" type="checkbox" [(ngModel)]="secondaryPermitHolderSameAddress" />
        <label class="usa-input" for="secondary-permit-holder-same-address">Secondary permit holder address same as organization address</label>

        <div *ngIf="!secondaryPermitHolderSameAddress">
          <label class="usa-input" for="secondary-permit-holder-address">Address</label>
          <input id="secondary-permit-holder-address" name="secondary-permit-holder-address" type="text" required [(ngModel)]="application.secondaryPermitHolderAddress" #secondaryPermitHolderAddress="ngModel" />
          <span class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderAddress.valid || secondaryPermitHolderAddress.untouched">Address is required</span>

          <label class="usa-input" for="secondary-permit-holder-address-line-2">Address Line 2 (optional)</label>
          <input id="secondary-permit-holder-address-line-2" name="secondary-permit-holder-address-line-2" type="text" [(ngModel)]="application.secondaryPermitHolderAddressLine2" />

          <label class="usa-input" for="secondary-permit-holder-city">City</label>
          <input id="secondary-permit-holder-city" name="secondary-permit-holder-city" type="text" required [(ngModel)]="application.secondaryPermitHolderCity" #secondaryPermitHolderCity="ngModel" />
          <span class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderCity.valid || secondaryPermitHolderCity.untouched">City is required</span>

          <label class="usa-input" for="secondary-permit-holder-state">State</label>
          <select id="secondary-permit-holder-state" name="secondary-permit-holder-state" required [(ngModel)]="application.secondaryPermitHolderState" #secondaryPermitHolderState="ngModel">
            <option value="" selected="selected"></option>
            <option *ngFor="let state of states" [value]="state">{{state}}</option>
          </select>
          <span class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderState.valid || secondaryPermitHolderState.untouched">State is required</span>

          <label class="usa-input" for="secondary-permit-holder-zip">ZIP</label>
          <input id="secondary-permit-holder-zip" name="secondary-permit-holder-zip" type="text" minlength="5" maxlength="5" pattern="(^\d{5}$)" required [(ngModel)]="application.zip" #secondaryPermitHolderZip="ngModel" />
          <span class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderZip.valid || secondaryPermitHolderZip.untouched">ZIP is required</span>
        </div>

      </fieldset>

      <hr/>

      <fieldset>
        <legend>Event Details</legend>

        <label class="usa-input" for="activity-description">Description of proposed activity</label>
        <textarea id="activity-description" name="activity-description" required [(ngModel)]="application.activityDescription" #activityDescription="ngModel"></textarea>
        <span class="usa-input-error-message" role="alert" [hidden]="activityDescription.valid || activityDescription.untouched">Activity Description is required</span>

        <label class="usa-input" for="location">Location and description of National Forest system lands and facilities applicant would like to use</label>
        <input id="location" name="location" type="text" required [(ngModel)]="application.location" #location="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="location.valid || location.untouched">Location is required</span>

        <label class="usa-input" for="participants">Estimated number of participants</label><span class="help-text usa-form-hint">This is the number of people who will directly participate in the event.</span>
        <input id="participants" name="participants" type="number" required [(ngModel)]="application.participants" #participants="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="participants.valid || participants.untouched">Participants is required</span>

        <label class="usa-input" for="spectators">Estimated number of spectators</label><span class="help-text usa-form-hint">If your event will have spectators (such as at a sporting event), please note how many additional people will be spectators</span>
        <input id="spectators" name="spectators" type="number" required [(ngModel)]="application.spectators" #spectators="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="spectators.valid || spectators.untouched">Spectators is required</span>

        <fieldset>
          <legend>Start Date</legend>
          <div class="usa-form-group usa-form-group-month">
            <label for="start-month">Month</label>
            <input class="usa-input-inline" id="start-month" name="start-month" type="text" minlength="1" maxlength="2" pattern="(0?[1-9]|1[012])" required [(ngModel)]="application.startMonth" #startMonth="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-day">
            <label for="start-day">Day</label>
            <input class="usa-input-inline" id="start-day" name="start-day" type="text" minlength="1" maxlength="2" pattern="(0?[1-9]|1[0-9]|2[0-9]|3[01])" required [(ngModel)]="application.startDay" #startDay="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="start-year">Year</label>
            <input class="usa-input-inline" id="start-year" name="start-year" type="text" minlength="4" maxlength="4" pattern="([0-9]{4})" required [(ngModel)]="application.startYear" #startYear="ngModel" />
          </div>
        </fieldset>
        <span class="usa-input-error-message" role="alert" [hidden]="(startMonth.valid || startMonth.untouched) && (startDay.valid || startDay.untouched) && (startYear.valid || startYear.untouched)">Start date is required</span>

        <fieldset>
          <legend>Start Time </legend>
          <div class="usa-form-group usa-form-group-year">
            <label for="start-hour">Hour</label>
            <select class="usa-input-inline" id="start-hour" name="start-hour" required [(ngModel)]="application.startHour" #startHour="ngModel">
              <option value="" selected="selected"></option>
              <option *ngFor="let hour of hours" [value]="hour">{{hour}}</option>
            </select>
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="start-minutes">Minutes</label>
            <select class="usa-input-inline" id="start-minutes" name="start-minutes" required [(ngModel)]="application.startMinutes" #startMinutes="ngModel">
              <option value="" selected="selected"></option>
              <option *ngFor="let minute of minutes" [value]="minute">{{minute}}</option>
            </select>
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="start-period">AM / PM</label>
            <select class="usa-input-inline" id="start-period" name="start-period" required [(ngModel)]="application.startPeriod" #startPeriod="ngModel">
              <option value="" selected="selected"></option>
              <option value="AM">AM</option>
              <option value="PM">PM</option>
            </select>
          </div>
        </fieldset>
        <span class="usa-input-error-message" role="alert" [hidden]="(startHour.valid || startHour.untouched) && (startMinutes.valid || startMinutes.untouched) && (startPeriod.valid || startPeriod.untouched)">Start time is required</span>

        <fieldset>
          <legend>End Date</legend>
          <div class="usa-form-group usa-form-group-month">
            <label for="end-month">Month</label>
            <input class="usa-input-inline" id="end-month" name="end-month" type="text" minlength="1" maxlength="2" pattern="(0?[1-9]|1[012])" required [(ngModel)]="application.endMonth" #endMonth="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-day">
            <label for="end-day">Day</label>
            <input class="usa-input-inline" id="end-day" name="end-day" type="text" minlength="1" maxlength="2" pattern="(0?[1-9]|1[0-9]|2[0-9]|3[01])" required [(ngModel)]="application.endDay" #endDay="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="end-year">Year</label>
            <input class="usa-input-inline" id="end-year" name="end-year" type="text" minlength="4" maxlength="4" pattern="([0-9]{4})" required [(ngModel)]="application.endYear" #endYear="ngModel" />
          </div>
        </fieldset>
        <span class="usa-input-error-message" role="alert" [hidden]="(endMonth.valid || endMonth.untouched) && (endDay.valid || endDay.untouched) && (endYear.valid || endYear.untouched)">End date is required</span>

        <fieldset>
          <legend>End Time </legend>
          <div class="usa-form-group usa-form-group-year">
            <label for="end-hour">Hour</label>
            <select class="usa-input-inline" id="end-hour" name="end-hour" required [(ngModel)]="application.endHour" #endHour="ngModel">
              <option value="" selected="selected"></option>
              <option *ngFor="let hour of hours" [value]="hour">{{hour}}</option>
            </select>
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="end-minutes">Minutes</label>
            <select class="usa-input-inline" id="end-minutes" name="end-minutes" required [(ngModel)]="application.endMinutes" #endMinutes="ngModel">
              <option value="" selected="selected"></option>
              <option *ngFor="let minute of minutes" [value]="minute">{{minute}}</option>
            </select>
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="end-period">AM / PM</label>
            <select class="usa-input-inline" id="end-period" name="end-period" required [(ngModel)]="application.endPeriod" #endPeriod="ngModel">
              <option value="" selected="selected"></option>
              <option value="AM">AM</option>
              <option value="PM">PM</option>
            </select>
          </div>
        </fieldset>
        <span class="usa-input-error-message" role="alert" [hidden]="(endHour.valid || endHour.untouched) && (endMinutes.valid || endMinutes.untouched) && (endPeriod.valid || endPeriod.untouched)">End time is required</span>

      </fieldset>

      <hr/>

      <fieldset>
        <legend>Signature</legend>
        <label class="usa-input" for="signature">Type your initials here as a signature on your application</label>
        <input id="signature" name="signature" type="text" required [(ngModel)]="application.signature" #signature="ngModel" />
        <span class="usa-input-error-message" role="alert" [hidden]="signature.valid || signature.untouched">Signature is required</span>
      </fieldset>

      <button class="usa-button-big" type="submit" [disabled]="!form.valid">Submit Your Application</button>

    </form>
  </div>
</section>
